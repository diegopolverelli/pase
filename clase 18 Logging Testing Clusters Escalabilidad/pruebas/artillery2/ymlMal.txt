config:
  plugins:
    metrics-by-endpoint:{}
  target: 'http://localhost:3000'
  phases:
    - duration: 20
      arrivalRate: 10
scenarios:
  - name: "Sessions Flow (registro + login)"
      flow:
        - log: "Creamos las variables para el usuario de prueba"
        - get:
          url: '/usuario'
          captura:
            - json: "$.nombre"
            - as: "nombre"
            - json: "$.apellido"
            - as: "apellido"
            - json: "$.email"
            - as: "email"
            - json: "$.password"
            - as: "password"
        - log: "Registro de usuario"
        - post:
          url: '/registro'
          json:
            nombre: "{{nombre}}"
            apellido: "{{apellido}}"
            email: "{{email}}"
            password: "{{password}}"
        - thik: 2
        - log: "Login"
        - post:
          url: "login"
          json:
            email: "{{password}}"
            password: "{{password}}"